传统的 I/O 操作（如磁盘、网络或外部设备的读写操作）通常会涉及 **CPU**、**内存**、**I/O 设备控制器** 和 **I/O 设备的本地缓冲区**。其工作流程可以分为以下几个步骤：

### 1. **应用程序发起 I/O 请求**
- **应用程序层** 或 **操作系统** 中的进程发起 I/O 操作请求。例如，应用程序调用一个文件读取函数（如 `read()`）来请求从硬盘读取数据。
- I/O 请求会由操作系统的 I/O 子系统管理，操作系统需要通过系统调用将该请求传递给硬件设备进行处理。

### 2. **操作系统处理请求并向 I/O 设备控制器发出命令**
- 操作系统通过调用相应的设备驱动程序，向 I/O 设备控制器发出指令，告知设备控制器进行相应的操作（如从磁盘读取数据或将数据写入磁盘）。
- 设备控制器是一个硬件组件，负责接收和执行来自操作系统的命令，并管理数据的传输。

### 3. **设备控制器访问 I/O 设备并读取/写入数据**
- 设备控制器向 **I/O 设备**（如硬盘、打印机、网络接口等）发出实际的读取或写入命令。
- **I/O 设备本地缓冲区**：设备通常会有一个本地缓冲区（比如硬盘缓存）。当控制器执行 I/O 操作时，它会将数据从设备传输到本地缓冲区，或者从缓冲区写入到设备。
- 设备控制器在处理完该命令后，将数据传输到 **内存**（在读取操作时），或者从内存传输到设备（在写入操作时）。

### 4. **数据传输至内存**
- 如果是 **读取操作**，设备控制器将数据从 **I/O 设备** 的本地缓冲区（如硬盘缓存）读取到系统的 **内存** 中，通常是一个特定的缓冲区。
- 如果是 **写入操作**，数据则会从 **内存** 中的缓冲区写入到 I/O 设备的本地缓冲区（例如硬盘缓存）。

### 5. **CPU 被通知完成**
- 一旦数据传输完成，设备控制器会通过 **中断机制** 通知 CPU 操作完成。
- **中断** 是一种机制，CPU 会暂停当前的任务并处理中断信号，通常会通过中断向操作系统或进程发出信号，表明数据已准备就绪，或写入操作已完成。

### 6. **操作系统处理完成的 I/O 操作**
- CPU 响应中断后，操作系统会进行必要的后处理。例如，更新文件系统的状态，或者将从设备读取的数据提供给应用程序。
- 如果是读取操作，数据从内存中的缓冲区复制到用户空间（如果是同步 I/O 操作）；如果是写入操作，数据从用户空间的缓冲区写回到文件或设备中。

### 7. **应用程序接收结果**
- 一旦 I/O 操作完成，操作系统会通知应用程序该操作已完成。应用程序可以接收到读取的数据或确认数据已成功写入。

---

### 总结：I/O 操作的工作流程

1. **应用程序请求 I/O 操作**（如文件读写）。
2. **操作系统处理请求**，通过设备驱动程序与设备控制器交互。
3. **设备控制器与 I/O 设备通信**，进行数据传输，数据存放在设备的本地缓冲区。
4. **设备控制器将数据传输到内存**（对于读取操作）或从内存传输到设备（对于写入操作）。
5. **CPU 通过中断被通知 I/O 操作完成**。
6. **操作系统处理 I/O 完成**，将数据提供给应用程序或更新文件系统状态。
7. **应用程序接收数据或结果**，完成 I/O 操作。

通过以上步骤，传统的 I/O 操作可以有效地完成从应用程序到硬件设备的读写任务。